<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Simple Gantt</title>
	<script>
		var website_creation = [
			{
				start: '2023-01-01',
				end: '2023-01-08',
				name: 'Redesign Website',
				id: "Task 0",
				progress: 20,
				custom_class: 'bar-blue'
			},
			{
				start: '2023-01-03',
				end: '2023-01-06',
				name: 'Write New Content',
				id: "Task 1",
				progress: 5,
				dependencies: 'Task 0',
				custom_class: 'bar-sky'
			},
			{
				start: '2023-01-04',
				end: '2023-01-08',
				name: 'Apply New Styles',
				id: "Task 2",
				progress: 10,
				dependencies: 'Task 1',
				custom_class: 'bar-sky'
			},
			{
				start: '2023-01-09',
				end: '2023-01-11',
				name: 'Review Changes',
				id: "Task 3",
				progress: 20,
				dependencies: 'Task 2',
				custom_class: 'bar-green'
			},
			{
				start: '2023-01-09',
				end: '2023-01-13',
				name: 'Deploy Changes',
				id: "Task 4",
				progress: 30,
				dependencies: 'Task 2',
				custom_class: 'bar-lime'
			},
			{
				start: '2023-01-14',
				end: '2023-01-15',
				name: 'Go Live!',
				id: "Task 5",
				progress: 10,
				dependencies: 'Task 4',
				custom_class: 'bar-rose'
			}
		]

		var waterfall_projectplan = [
			{
				start: '2023-01-01',
				end: '2023-03-31',
				name: 'Requirements Analysis Phase',
				id: "Task 0",
				progress: 30,
				custom_class: 'bar-slate'
			},
			{
				start: '2023-04-01',
				end: '2023-06-30',
				name: 'System Design Phase',
				id: "Task 1",
				progress: 5,
				dependencies: 'Task 0',
				custom_class: 'bar-stone'
			},
			{
				start: '2023-07-01',
				end: '2023-11-30',
				name: 'Implementation Phase',
				id: "Task 2",
				progress: 5,
				dependencies: 'Task 1',
				custom_class: 'bar-slate'
			},
			{
				start: '2023-12-01',
				end: '2024-01-31',
				name: 'Testing Phase',
				id: "Task 3",
				progress: 5,
				dependencies: 'Task 2',
				custom_class: 'bar-stone'
			},
			{
				start: '2024-02-01',
				end: '2024-02-28',
				name: 'Deployment Phase',
				id: "Task 4",
				progress: 5,
				dependencies: 'Task 3',
				custom_class: 'bar-slate'
			},
			{
				start: '2024-02-29',
				end: '2024-07-31',
				name: 'Maintenance Phase',
				id: "Task 5",
				progress: 5,
				dependencies: 'Task 4',
				custom_class: 'bar-gray'
			}
		]

		var colorful = [
		{
				start: '2022-12-30',
				end: '2023-01-01',
				name: 'Slate Phase 0',
				id: "Task 0",
				progress: 0,
				custom_class: 'bar-slate'
			},	
		  {
				start: '2023-01-01',
				end: '2023-01-03',
				name: 'Gray Phase 1',
				id: "Task 0",
				progress: 10,
				custom_class: 'bar-gray'
			},
			{
				start: '2023-01-03',
				end: '2023-01-05',
				name: 'Stone Phase 2',
				id: "Task 1",
				progress: 20,
				custom_class: 'bar-stone'
			},
			{
				start: '2023-01-05',
				end: '2023-01-07',
				name: 'Red Phase 3',
				id: "Task 2",
				progress: 30,
				custom_class: 'bar-red'
			},
			{
				start: '2023-01-07',
				end: '2023-01-09',
				name: 'Orange Phase 4',
				id: "Task 3",
				progress: 40,
				custom_class: 'bar-orange'
			},
			{
				start: '2023-01-09',
				end: '2023-01-11',
				name: 'Lime Phase 5',
				id: "Task 4",
				progress: 50,
				custom_class: 'bar-lime'
			},
			{
				start: '2023-01-11',
				end: '2023-01-13',
				name: 'Green Phase 6',
				id: "Task 5",
				progress: 60,
				custom_class: 'bar-green'
			},
			{
				start: '2023-01-13',
				end: '2023-01-15',
				name: 'Sky Phase 7',
				id: "Task 6",
				progress: 70,
				custom_class: 'bar-sky'
			},
			{
				start: '2023-01-15',
				end: '2023-01-17',
				name: 'Blue Phase 8',
				id: "Task 7",
				progress: 80,
				custom_class: 'bar-blue'
			},
			{
				start: '2023-01-17',
				end: '2023-01-19',
				name: 'Violet Phase 9',
				id: "Task 8",
				progress: 90,
				custom_class: 'bar-violet'
			},
			{
				start: '2023-01-19',
				end: '2023-01-21',
				name: 'Fuchsia Phase 10',
				id: "Task 9",
				progress: 100,
				custom_class: 'bar-fuchsia'
			},
			{
				start: '2023-01-21',
				end: '2023-01-23',
				name: 'Pink Phase 11',
				id: "Task 10",
				progress: 10,
				custom_class: 'bar-pink'
			},
			{
				start: '2023-01-23',
				end: '2023-01-25',
				name: 'Rose Phase 12',
				id: "Task 11",
				progress: 20,
				custom_class: 'bar-rose'
			},
		]
	</script>
	<link rel="stylesheet" href="dist/frappe-gantt.css" />
	<script>
		var _gantt_chart = null;
		var _view_mode = 'Day';
		var _readonly_mode = false;
		var _sortable_mode = false;
		var _show_progress = false;
		var _show_weekends = false;
		var _popup_trigger = 'none';
		var _tasks = website_creation;
	</script>
	<script src="dist/frappe-gantt.js"></script>
	<script src="https://cdn.tailwindcss.com?plugins=forms"></script>

	<style>
		body {
			font-family: sans-serif;
			background: #ccc;
		}
		.container {
			width: 80%;
			margin: 0 auto;
		}

		/* custom classes */
		/* tailwindcss colors */
		/* https://tailwindcss.com/docs/customizing-colors */

		.gantt .bar-slate .bar {
			fill: #475569; /* slate-600 */
		}
		.gantt .bar-gray .bar {
			fill: #4b5563; /* gray-600 */
		}
		.gantt .bar-stone .bar {
			fill: #57534e; /* stone-600 */
		}
		.gantt .bar-red .bar {
			fill: #dc2626; /* red-600 */
		}
		.gantt .bar-orange .bar {
			fill: #ea580c; /* orange-600 */
		}
		.gantt .bar-lime .bar {
			fill: #65a30d; /* lime-600 */
		}
		.gantt .bar-green .bar {
			fill: #16a34a; /* green-600 */
		}
		.gantt .bar-sky .bar {
			fill: #0284c7; /* sky-600 */
		}
		.gantt .bar-blue .bar {
			fill: #2563eb; /* blue-600 */
		}
		.gantt .bar-violet .bar {
			fill: #7c3aed; /* violet-600 */
		}
		.gantt .bar-fuchsia .bar {
			fill: #c026d3; /* fuchsia-600 */
		}
		.gantt .bar-pink .bar {
			fill: #db2777; /* pink-600 */
		}
		.gantt .bar-rose .bar {
			fill: #e11d48; /* rose-600 */
		}
		
		
	</style>
</head>
<body>
	<div class="container">
		<h2 class="text-xl pt-5">Interactive Gantt Chart made in SVG!</h2>

		<script>
			const reset_button_selection = () => {
				document.getElementById('quarter_day_button').classList.remove('bg-slate-200');
				document.getElementById('half_day_button').classList.remove('bg-slate-200');
				document.getElementById('day_button').classList.remove('bg-slate-200');
				document.getElementById('week_button').classList.remove('bg-slate-200');
				document.getElementById('month_button').classList.remove('bg-slate-200');
				document.getElementById('year_button').classList.remove('bg-slate-200');
			}
			const quarter_day = () => {
				_gantt_chart.change_view_mode('Quarter Day');
				_view_mode = 'Quarter Day';
				reset_button_selection();
				document.getElementById('quarter_day_button').classList.add('bg-slate-200');
			}
			const half_day = () => {
				_gantt_chart.change_view_mode('Half Day');
				_view_mode = 'Half Day';
				reset_button_selection();
				document.getElementById('half_day_button').classList.add('bg-slate-200');
			}
			const day = () => {
				_gantt_chart.change_view_mode('Day');
				_view_mode = 'Day';
				reset_button_selection();
				document.getElementById('day_button').classList.add('bg-slate-200');
			}
			const week = () => {
				_gantt_chart.change_view_mode('Week');
				_view_mode = 'Week';
				reset_button_selection();
				document.getElementById('week_button').classList.add('bg-slate-200');
			}
			const month = () => {
				_gantt_chart.change_view_mode('Month');
				_view_mode = 'Month';
				reset_button_selection();
				document.getElementById('month_button').classList.add('bg-slate-200');
			}
			const year = () => {
				_gantt_chart.change_view_mode('Year');
				_view_mode = 'Year';
				reset_button_selection();
				document.getElementById('year_button').classList.add('bg-slate-200');
			}

			/* SWITCH readonly mode for gantt chart */
			const switch_readonly_mode = () => {
				const enabled = document.getElementById('switch_readonly_mode').classList.contains('bg-green-600');
				if (enabled) {
					document.getElementById('switch_readonly_mode').classList.remove('bg-green-600');
					document.getElementById('switch_readonly_mode').classList.add('bg-gray-200');
					document.getElementById('switch_span_readonly_mode').classList.remove('translate-x-5');
					document.getElementById('switch_span_readonly_mode').classList.add('translate-x-0');
					_readonly_mode = false;
					init_gantt();
				} else {
					document.getElementById('switch_readonly_mode').classList.remove('bg-gray-200');
					document.getElementById('switch_readonly_mode').classList.add('bg-green-600');
					document.getElementById('switch_span_readonly_mode').classList.remove('translate-x-0');
					document.getElementById('switch_span_readonly_mode').classList.add('translate-x-5');
					_readonly_mode = true;
					init_gantt();
				}
			}

			/* SWITCH sortable mode for gantt chart */
			const switch_sortable_mode = () => {
				const enabled = document.getElementById('switch_sortable_mode').classList.contains('bg-green-600');
				if (enabled) {
					document.getElementById('switch_sortable_mode').classList.remove('bg-green-600');
					document.getElementById('switch_sortable_mode').classList.add('bg-gray-200');
					document.getElementById('switch_span_sortable_mode').classList.remove('translate-x-5');
					document.getElementById('switch_span_sortable_mode').classList.add('translate-x-0');
					_sortable_mode = false;
					init_gantt();
				} else {
					document.getElementById('switch_sortable_mode').classList.remove('bg-gray-200');
					document.getElementById('switch_sortable_mode').classList.add('bg-green-600');
					document.getElementById('switch_span_sortable_mode').classList.remove('translate-x-0');
					document.getElementById('switch_span_sortable_mode').classList.add('translate-x-5');
					_sortable_mode = true;
					init_gantt();
				}
			}

			/* SWITCH show progress on bars for gantt chart */
			const switch_show_progress = () => {
				const enabled = document.getElementById('switch_show_progress').classList.contains('bg-green-600');
				if (enabled) {
					document.getElementById('switch_show_progress').classList.remove('bg-green-600');
					document.getElementById('switch_show_progress').classList.add('bg-gray-200');
					document.getElementById('switch_span_show_progress').classList.remove('translate-x-5');
					document.getElementById('switch_span_show_progress').classList.add('translate-x-0');
					_show_progress = false;
					init_gantt();
				} else {
					document.getElementById('switch_show_progress').classList.remove('bg-gray-200');
					document.getElementById('switch_show_progress').classList.add('bg-green-600');
					document.getElementById('switch_span_show_progress').classList.remove('translate-x-0');
					document.getElementById('switch_span_show_progress').classList.add('translate-x-5');
					_show_progress = true;
					init_gantt();
				}
			}

			/* SWITCH show weekends as shaddow in gantt chart */
			const switch_show_weekends = () => {
				const enabled = document.getElementById('switch_show_weekends').classList.contains('bg-green-600');
				if (enabled) {
					document.getElementById('switch_show_weekends').classList.remove('bg-green-600');
					document.getElementById('switch_show_weekends').classList.add('bg-gray-200');
					document.getElementById('switch_span_show_weekends').classList.remove('translate-x-5');
					document.getElementById('switch_span_show_weekends').classList.add('translate-x-0');
					_show_weekends = false;
					init_gantt();
				} else {
					document.getElementById('switch_show_weekends').classList.remove('bg-gray-200');
					document.getElementById('switch_show_weekends').classList.add('bg-green-600');
					document.getElementById('switch_span_show_weekends').classList.remove('translate-x-0');
					document.getElementById('switch_span_show_weekends').classList.add('translate-x-5');
					_show_weekends = true;
					init_gantt();
				}
			}

			/* SWITCH bar popups from show on mouseover to NOT shown */
			const switch_popup_trigger = () => {
				const enabled = document.getElementById('switch_popup_trigger').classList.contains('bg-green-600');
				if (enabled) {
					document.getElementById('switch_popup_trigger').classList.remove('bg-green-600');
					document.getElementById('switch_popup_trigger').classList.add('bg-gray-200');
					document.getElementById('switch_span_popup_trigger').classList.remove('translate-x-5');
					document.getElementById('switch_span_popup_trigger').classList.add('translate-x-0');
					_popup_trigger = 'none';
					init_gantt();
				} else {
					document.getElementById('switch_popup_trigger').classList.remove('bg-gray-200');
					document.getElementById('switch_popup_trigger').classList.add('bg-green-600');
					document.getElementById('switch_span_popup_trigger').classList.remove('translate-x-0');
					document.getElementById('switch_span_popup_trigger').classList.add('translate-x-5');
					_popup_trigger = 'mouseover';
					init_gantt();
				}
			}

			/* DROPDOWN for loading different data */
			const dropdown_data_loader = (dropdown) => {

				if (dropdown.value === "Website Creation") {
					day();
					_gantt_chart.refresh(website_creation);
					_tasks = website_creation;
				} else if (dropdown.value === "Waterfall Projectplan") {
					month();
					_gantt_chart.refresh(waterfall_projectplan);
					_tasks = waterfall_projectplan;
				} else if (dropdown.value === "Colorful Bars") {
					week();
					_gantt_chart.refresh(colorful);
					_tasks = colorful;
				}
				console.log('### dropdown selected: ', dropdown.value);
			}
		</script>

		<div class="mt-6 mb-2 text-sm">Gantt Configuration:</div>

		<!-- Switch readonly mode for gantt chart -->
		<div class="flex items-center mb-2">
			<button type="button" id="switch_readonly_mode" class="bg-gray-200 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="annual-billing-label" onclick="switch_readonly_mode()">
				<span aria-hidden="true" id="switch_span_readonly_mode" class="translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
			</button>
			<span class="ml-3" id="annual-billing-label">
				<span class="text-sm font-medium text-gray-900">readonly mode</span>
				<span class="text-sm text-gray-500">(gantt bars can not be changed via drag & drop)</span>
			</span>
		</div>

		<!-- Switch sortable mode for gantt chart -->
		<div class="flex items-center mb-2">
			<button type="button" id="switch_sortable_mode" class="bg-gray-200 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="annual-billing-label" onclick="switch_sortable_mode()">
				<span aria-hidden="true" id="switch_span_sortable_mode" class="translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
			</button>
			<span class="ml-3" id="annual-billing-label">
				<span class="text-sm font-medium text-gray-900">sortable mode</span>
				<span class="text-sm text-gray-500">(gantt bars can be moved across rows)</span>
			</span>
		</div>

		<!-- Switch show progress on bars for gantt chart -->
		<div class="flex items-center mb-2">
			<button type="button" id="switch_show_progress" class="bg-gray-200 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="annual-billing-label" onclick="switch_show_progress()">
				<span aria-hidden="true" id="switch_span_show_progress" class="translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
			</button>
			<span class="ml-3" id="annual-billing-label">
				<span class="text-sm font-medium text-gray-900">show progress</span>
				<span class="text-sm text-gray-500">(gantt bars show progress that can be changed)</span>
			</span>
		</div>

		<!-- Switch show weekends as shaddow in gantt chart -->
		<div class="flex items-center mb-2">
			<button type="button" id="switch_show_weekends" class="bg-gray-200 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="annual-billing-label" onclick="switch_show_weekends()">
				<span aria-hidden="true" id="switch_span_show_weekends" class="translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
			</button>
			<span class="ml-3" id="annual-billing-label">
				<span class="text-sm font-medium text-gray-900">show weekends</span>
				<span class="text-sm text-gray-500">(gantt chart shows the weekends as shaddow in DAY view mode)</span>
			</span>
		</div>

		<!-- Switch bar popups from show on mouseover to NOT shown -->
		<div class="flex items-center mb-2">
			<button type="button" id="switch_popup_trigger" class="bg-gray-200 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" role="switch" aria-checked="false" aria-labelledby="annual-billing-label" onclick="switch_popup_trigger()">
				<span aria-hidden="true" id="switch_span_popup_trigger" class="translate-x-0 pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
			</button>
			<span class="ml-3" id="annual-billing-label">
				<span class="text-sm font-medium text-gray-900">show bar-popup</span>
				<span class="text-sm text-gray-500">(gantt chart shows popup on bars with detailed infomation when mouseover)</span>
			</span>
		</div>


		<!-- View Changer Button Group -->
		<div class="mt-6 mb-2 text-sm">Gantt View Modes:</div>
		<span class="isolate inline-flex shadow-sm mb-5">
			<button type="button" id="quarter_day_button" class="rounded-l-md relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500" onclick="quarter_day()">Quarter Day</button>
			<button type="button" id="half_day_button" class="relative -ml-px inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500" onclick="half_day()">Half Day</button>
			<button type="button" id="day_button" class="relative -ml-px inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500 bg-slate-200" onclick="day()">Day</button>
			<button type="button" id="week_button" class="relative -ml-px inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500" onclick="week()">Week</button>
			<button type="button" id="month_button" class="relative -ml-px inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500" onclick="month()">Month</button>
			<button type="button" id="year_button" class="rounded-r-md relative -ml-px inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-xs font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-gray-500 focus:outline-none focus:ring-1 focus:ring-gray-500" onclick="year()">Year</button>
		</span>

		<div class="gantt-target"></div>

		<!-- MESSAGE -->
		<div class="rounded-md bg-amber-50 p-4 mt-6 mb-6">
			<div class="flex">
				<div class="flex-shrink-0">
					<!-- Heroicon name: mini/exclamation-triangle -->
					<svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
						<path fill-rule="evenodd" d="M8.485 3.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 3.495zM10 6a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 6zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
					</svg>
				</div>
				<div class="ml-3">
					<h3 class="text-sm font-medium text-yellow-800">Attention</h3>
					<div class="mt-2 text-sm text-yellow-700">
						<p>Your changes will not be saved!</p>
						<p class="pt-1">Changes in the configuration will reload the dummy data.</p>
					</div>
				</div>
			</div>
		</div>

		<!-- DROPDOWN for loading different datasets -->
		<div class="w-52 mb-6">
			<label for="location" class="block text-sm font-medium text-gray-700">Load different datasets:</label>
			<select id="dropdown_data_loader" name="location" class="mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-gray-500 focus:outline-none focus:ring-gray-500 sm:text-sm" onchange="dropdown_data_loader(this)">
				<option>Website Creation</option>
				<option>Waterfall Projectplan</option>
				<option>Colorful Bars</option>
			</select>
		</div>

		

	</div>
	<script>
		// Gantt Chart Initialization
		var init_gantt = () => {
			// clear gantt_target
			const gantt_target = document.querySelector(".gantt-target");
			gantt_target.innerHTML = "";
			
			_gantt_chart = new Gantt(".gantt-target", _tasks, {
				on_dblclick: function (task) {
					console.log("### on_dblclick: ", task);
				},
				on_date_change: function(task, start, end) {
					console.log("### on_date_change: ", task, start, end);
				},
				on_progress_change: function(task, progress) {
					console.log("### on_progress_change: ", task, progress);
				},
				on_view_change: function(mode) {
					console.log("### on_view_change: ", mode);
				},
				on_bar_sort: function(task_being_dragged_id, task_being_replaced_id) {
					console.log("### on_bar_sort: (dragged/replaced) ", task_being_dragged_id, "/", task_being_replaced_id);
				},
				view_mode: _view_mode, // Quarter Day, Half Day, Day, Week, Month, Year
				language: 'en',
				sortable: _sortable_mode,
				readonly: _readonly_mode,
				show_progress: _show_progress,
				show_weekends: _show_weekends,
				popup_trigger: _popup_trigger, // 'mouseover' or null
			});
		}

		init_gantt();
		
	</script>
</body>
</html>